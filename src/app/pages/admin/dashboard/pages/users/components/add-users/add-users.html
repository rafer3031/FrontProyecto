<div class="dialog-container">
  <div class="dialog-header">
    <mat-icon class="login-icon" aria-hidden="false" aria-label="login icon" fontIcon="account_circle"></mat-icon>
    <h2 mat-dialog-title class="text-2xl font-bold mt-2 mb-2">Creación de un nuevo Usuario</h2>
    <p class="text-sm text-gray-500 mb-4 text-center">
      Registro de usuarios con correo y contraseña
    </p>
  </div>

  <mat-dialog-content class="dialog-content">
    <form [formGroup]="form" (ngSubmit)="submit()">
      <mat-form-field class="input-form mt-4 mb-3 w-full">
        <mat-label>Ingrese su E-mail</mat-label>
        <input
          type="email"
          matInput
          #email
          maxlength="45"
          placeholder="ejemplo@outlook.com"
          formControlName="email"
          required
        />
        @if (form.controls.email.errors?.['required'] && email.value == '') {
        <mat-error>El correo es obligatorio</mat-error>
        } @if (form.controls.email.errors?.['email']) {
        <mat-error>Ingrese un correo válido</mat-error>
        }
        <mat-hint align="end">{{ email.value.length }} / 45</mat-hint>
      </mat-form-field>

      <mat-form-field class="input-form mb-3 w-full">
        <mat-label>Ingrese su contraseña</mat-label>
        <input
          maxlength="45"
          #password
          matInput
          formControlName="password"
          [type]="hide() ? 'password' : 'text'"
        />
        <button
          type="button"
          matIconButton
          matSuffix
          (click)="clickEvent($event)"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hide()"
        >
          <mat-icon>{{ hide() ? "visibility_off" : "visibility" }}</mat-icon>
        </button>
        @if (form.controls.password.errors?.['required'] && password.value == '') {
        <mat-error>La contraseña es obligatoria</mat-error>
        } @if (form.controls.password.errors?.['minlength'] && password.value != '') {
        <mat-error>La contraseña tiene que ser mayor a 6 caracteres</mat-error>
        }
        <mat-hint align="end">{{ password.value.length }} / 45</mat-hint>
      </mat-form-field>

      <mat-form-field class="input-form mb-3 w-full">
        <mat-label>Confirme su contraseña</mat-label>
        <input
          maxlength="45"
          #confirmPassword
          matInput
          formControlName="confirmPassword"
          [type]="hideConfirmPassword() ? 'password' : 'text'"
        />
        <button
          type="button"
          matIconButton
          matSuffix
          (click)="clickEventConfirm($event)"
          [attr.aria-label]="'Hide confirm Password'"
          [attr.aria-pressed]="hideConfirmPassword()"
        >
          <mat-icon>{{
            hideConfirmPassword() ? "visibility_off" : "visibility"
          }}</mat-icon>
        </button>

        @if (form.controls.confirmPassword.errors?.['required'] && confirmPassword.value == '') {
        <mat-error>Confirmar contraseña es obligatoria</mat-error>
        } @if (form.errors?.['passwordMismatch'] && confirmPassword.value != '' && form.controls.password.value != '') {
        <mat-error>Las contraseñas no coinciden</mat-error>
        }

        <mat-hint align="end">{{ confirmPassword.value.length }} / 45</mat-hint>
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="dialog-actions">
    <button
      mat-button
      type="button"
      (click)="onCancel()"
      class="cancel-button"
    >
      Cancelar
    </button>
    <button
      mat-raised-button
      color="primary"
      type="button"
      (click)="submit()"
      [disabled]="form.invalid"
      class="submit-button"
    >
      Registrar datos
    </button>
  </mat-dialog-actions>
</div>
